#include "unicode_font.h"
#include "font8x16.h"
#include <stdlib.h>
#include <string.h>

// Basic Hiragana characters (most common ones)
static const FontGlyph hiragana_glyphs[] = {
    // あ (a) - U+3042
    { 0x3042, { 0x00,0x00,0x1C,0x22,0x20,0x1C,0x22,0x22,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // い (i) - U+3044
    { 0x3044, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x3E,0x00,0x00,0x00,0x00 } },
    // う (u) - U+3046
    { 0x3046, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x1E,0x22,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // え (e) - U+3048
    { 0x3048, { 0x00,0x00,0x3E,0x00,0x1C,0x22,0x20,0x20,0x20,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // お (o) - U+304A
    { 0x304A, { 0x00,0x00,0x3E,0x08,0x08,0x1C,0x2A,0x2A,0x2A,0x2A,0x2A,0x1C,0x00,0x00,0x00,0x00 } },
    // か (ka) - U+304B
    { 0x304B, { 0x00,0x00,0x10,0x10,0x3E,0x10,0x10,0x1C,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // き (ki) - U+304D
    { 0x304D, { 0x00,0x00,0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // く (ku) - U+304F
    { 0x304F, { 0x00,0x00,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x02,0x00,0x00,0x00,0x00 } },
    // け (ke) - U+3051
    { 0x3051, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x02,0x02,0x02,0x02,0x02,0x3E,0x00,0x00,0x00,0x00 } },
    // こ (ko) - U+3053
    { 0x3053, { 0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00 } },
    // さ (sa) - U+3055
    { 0x3055, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x20,0x20,0x20,0x20,0x20,0x3E,0x00,0x00,0x00,0x00 } },
    // し (shi) - U+3057
    { 0x3057, { 0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // す (su) - U+3059
    { 0x3059, { 0x00,0x00,0x1E,0x20,0x20,0x1E,0x02,0x02,0x02,0x02,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // せ (se) - U+305B
    { 0x305B, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x02,0x02,0x02,0x02,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // そ (so) - U+305D
    { 0x305D, { 0x00,0x00,0x1E,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // た (ta) - U+305F
    { 0x305F, { 0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ち (chi) - U+3061
    { 0x3061, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // つ (tsu) - U+3064
    { 0x3064, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // て (te) - U+3066
    { 0x3066, { 0x00,0x00,0x3E,0x00,0x00,0x1C,0x20,0x20,0x20,0x20,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // と (to) - U+3068
    { 0x3068, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // な (na) - U+306A
    { 0x306A, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x22,0x22,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // に (ni) - U+306B
    { 0x306B, { 0x00,0x00,0x20,0x20,0x20,0x3E,0x20,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ぬ (nu) - U+306C
    { 0x306C, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x1E,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // ね (ne) - U+306D
    { 0x306D, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // の (no) - U+306E
    { 0x306E, { 0x00,0x00,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // は (ha) - U+306F
    { 0x306F, { 0x00,0x00,0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ひ (hi) - U+3072
    { 0x3072, { 0x00,0x00,0x20,0x20,0x20,0x20,0x3E,0x20,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ふ (fu) - U+3075
    { 0x3075, { 0x00,0x00,0x1C,0x22,0x02,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // へ (he) - U+3078
    { 0x3078, { 0x00,0x00,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ほ (ho) - U+307B
    { 0x307B, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x1C,0x2A,0x2A,0x2A,0x1C,0x00,0x00,0x00,0x00 } },
    // ま (ma) - U+307E
    { 0x307E, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x22,0x22,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // み (mi) - U+307F
    { 0x307F, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // む (mu) - U+3080
    { 0x3080, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // め (me) - U+3081
    { 0x3081, { 0x00,0x00,0x1C,0x22,0x22,0x22,0x1C,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // も (mo) - U+3082
    { 0x3082, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // や (ya) - U+3084
    { 0x3084, { 0x00,0x00,0x22,0x22,0x22,0x22,0x1C,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ゆ (yu) - U+3086
    { 0x3086, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x1E,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // よ (yo) - U+3088
    { 0x3088, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x1C,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // ら (ra) - U+3089
    { 0x3089, { 0x00,0x00,0x1C,0x22,0x02,0x02,0x1E,0x22,0x22,0x22,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // り (ri) - U+308A
    { 0x308A, { 0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // る (ru) - U+308B
    { 0x308B, { 0x00,0x00,0x1C,0x22,0x02,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // れ (re) - U+308C
    { 0x308C, { 0x00,0x00,0x1C,0x22,0x20,0x20,0x1E,0x02,0x02,0x02,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // ろ (ro) - U+308D
    { 0x308D, { 0x00,0x00,0x1C,0x22,0x02,0x02,0x02,0x02,0x02,0x02,0x22,0x1C,0x00,0x00,0x00,0x00 } },
    // わ (wa) - U+308F
    { 0x308F, { 0x00,0x00,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x14,0x08,0x00,0x00,0x00,0x00 } },
    // を (wo) - U+3092
    { 0x3092, { 0x00,0x00,0x22,0x22,0x22,0x22,0x1C,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // ん (n) - U+3093
    { 0x3093, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
};

// Basic Katakana characters (most common ones)
static const FontGlyph katakana_glyphs[] = {
    // ア (a) - U+30A2
    { 0x30A2, { 0x00,0x00,0x08,0x08,0x08,0x3E,0x08,0x08,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // イ (i) - U+30A4
    { 0x30A4, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ウ (u) - U+30A6
    { 0x30A6, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // エ (e) - U+30A8
    { 0x30A8, { 0x00,0x00,0x3E,0x00,0x3E,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // オ (o) - U+30AA
    { 0x30AA, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // カ (ka) - U+30AB
    { 0x30AB, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // キ (ki) - U+30AD
    { 0x30AD, { 0x00,0x00,0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ク (ku) - U+30AF
    { 0x30AF, { 0x00,0x00,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x02,0x00,0x00,0x00,0x00 } },
    // ケ (ke) - U+30B1
    { 0x30B1, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,0x00,0x00,0x00,0x00 } },
    // コ (ko) - U+30B3
    { 0x30B3, { 0x00,0x00,0x3E,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // サ (sa) - U+30B5
    { 0x30B5, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // シ (shi) - U+30B7
    { 0x30B7, { 0x00,0x00,0x08,0x08,0x08,0x08,0x14,0x14,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ス (su) - U+30B9
    { 0x30B9, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // セ (se) - U+30BB
    { 0x30BB, { 0x00,0x00,0x3E,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ソ (so) - U+30BD
    { 0x30BD, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // タ (ta) - U+30BF
    { 0x30BF, { 0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // チ (chi) - U+30C1
    { 0x30C1, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // ツ (tsu) - U+30C4
    { 0x30C4, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // テ (te) - U+30C6
    { 0x30C6, { 0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ト (to) - U+30C8
    { 0x30C8, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ナ (na) - U+30CA
    { 0x30CA, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // ニ (ni) - U+30CB
    { 0x30CB, { 0x00,0x00,0x3E,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // ヌ (nu) - U+30CC
    { 0x30CC, { 0x00,0x00,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // ネ (ne) - U+30CD
    { 0x30CD, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ノ (no) - U+30CE
    { 0x30CE, { 0x00,0x00,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ハ (ha) - U+30CF
    { 0x30CF, { 0x00,0x00,0x22,0x22,0x22,0x22,0x14,0x14,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ヒ (hi) - U+30D2
    { 0x30D2, { 0x00,0x00,0x08,0x08,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // フ (fu) - U+30D5
    { 0x30D5, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x00,0x00,0x00 } },
    // ヘ (he) - U+30D8
    { 0x30D8, { 0x00,0x00,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ホ (ho) - U+30DB
    { 0x30DB, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // マ (ma) - U+30DE
    { 0x30DE, { 0x00,0x00,0x3E,0x02,0x02,0x02,0x3E,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // ミ (mi) - U+30DF
    { 0x30DF, { 0x00,0x00,0x3E,0x00,0x3E,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // ム (mu) - U+30E0
    { 0x30E0, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // メ (me) - U+30E1
    { 0x30E1, { 0x00,0x00,0x02,0x02,0x04,0x04,0x3E,0x10,0x10,0x20,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // モ (mo) - U+30E2
    { 0x30E2, { 0x00,0x00,0x3E,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ヤ (ya) - U+30E4
    { 0x30E4, { 0x00,0x00,0x22,0x22,0x22,0x22,0x1C,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ユ (yu) - U+30E6
    { 0x30E6, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x00,0x00,0x00 } },
    // ヨ (yo) - U+30E8
    { 0x30E8, { 0x00,0x00,0x3E,0x00,0x3E,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // ラ (ra) - U+30E9
    { 0x30E9, { 0x00,0x00,0x3E,0x02,0x02,0x1E,0x22,0x22,0x22,0x22,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // リ (ri) - U+30EA
    { 0x30EA, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // ル (ru) - U+30EB
    { 0x30EB, { 0x00,0x00,0x1C,0x22,0x02,0x02,0x02,0x02,0x02,0x02,0x04,0x38,0x00,0x00,0x00,0x00 } },
    // レ (re) - U+30EC
    { 0x30EC, { 0x00,0x00,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x00,0x00,0x00,0x00 } },
    // ロ (ro) - U+30ED
    { 0x30ED, { 0x00,0x00,0x3E,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x3E,0x00,0x00,0x00,0x00 } },
    // ワ (wa) - U+30EF
    { 0x30EF, { 0x00,0x00,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x22,0x14,0x08,0x00,0x00,0x00,0x00 } },
    // ヲ (wo) - U+30F2
    { 0x30F2, { 0x00,0x00,0x22,0x22,0x22,0x22,0x1C,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
    // ン (n) - U+30F3
    { 0x30F3, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x0E,0x00,0x00,0x00,0x00 } },
};

// Common Kanji characters (basic set)
static const FontGlyph kanji_glyphs[] = {
    // 一 (one) - U+4E00
    { 0x4E00, { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // 二 (two) - U+4E8C
    { 0x4E8C, { 0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // 三 (three) - U+4E09
    { 0x4E09, { 0x00,0x00,0x00,0x3C,0x00,0x00,0x7E,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00 } },
    // 人 (person) - U+4EBA
    { 0x4EBA, { 0x00,0x00,0x08,0x08,0x08,0x14,0x14,0x14,0x22,0x22,0x22,0x41,0x00,0x00,0x00,0x00 } },
    // 日 (day/sun) - U+65E5
    { 0x65E5, { 0x00,0x00,0x3C,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00 } },
    // 月 (month/moon) - U+6708
    { 0x6708, { 0x00,0x00,0x3C,0x42,0x40,0x40,0x7C,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,0x00,0x00 } },
    // 火 (fire) - U+706B
    { 0x706B, { 0x00,0x00,0x08,0x08,0x1C,0x1C,0x2A,0x2A,0x49,0x49,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // 水 (water) - U+6C34
    { 0x6C34, { 0x00,0x00,0x08,0x08,0x49,0x2A,0x1C,0x08,0x1C,0x2A,0x49,0x08,0x00,0x00,0x00,0x00 } },
    // 木 (tree/wood) - U+6728
    { 0x6728, { 0x00,0x00,0x08,0x08,0x08,0x08,0x7F,0x08,0x08,0x14,0x14,0x22,0x00,0x00,0x00,0x00 } },
    // 金 (gold/money) - U+91D1
    { 0x91D1, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x7F,0x14,0x14,0x22,0x22,0x00,0x00,0x00,0x00 } },
    // 土 (earth/soil) - U+571F
    { 0x571F, { 0x00,0x00,0x08,0x08,0x08,0x08,0x7F,0x08,0x08,0x08,0x08,0xFF,0x00,0x00,0x00,0x00 } },
    // 大 (big) - U+5927
    { 0x5927, { 0x00,0x00,0x08,0x08,0x08,0x14,0x14,0x22,0x22,0x41,0x41,0x41,0x00,0x00,0x00,0x00 } },
    // 小 (small) - U+5C0F
    { 0x5C0F, { 0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x14,0x14,0x22,0x22,0x41,0x00,0x00,0x00,0x00 } },
    // 中 (middle) - U+4E2D
    { 0x4E2D, { 0x00,0x00,0x08,0x08,0x3E,0x08,0x08,0x08,0x08,0x08,0x3E,0x08,0x00,0x00,0x00,0x00 } },
    // 上 (up/above) - U+4E0A
    { 0x4E0A, { 0x00,0x00,0x08,0x08,0x08,0x08,0x7F,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // 下 (down/below) - U+4E0B
    { 0x4E0B, { 0x00,0x00,0x7F,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // 左 (left) - U+5DE6
    { 0x5DE6, { 0x00,0x00,0x08,0x08,0x08,0x7F,0x08,0x08,0x1C,0x2A,0x49,0x08,0x00,0x00,0x00,0x00 } },
    // 右 (right) - U+53F3
    { 0x53F3, { 0x00,0x00,0x7F,0x08,0x08,0x08,0x08,0x1C,0x2A,0x49,0x08,0x08,0x00,0x00,0x00,0x00 } },
    // 前 (front/before) - U+524D
    { 0x524D, { 0x00,0x00,0x3E,0x22,0x22,0x3E,0x22,0x22,0x3E,0x08,0x08,0x7F,0x00,0x00,0x00,0x00 } },
    // 後 (back/after) - U+5F8C
    { 0x5F8C, { 0x00,0x00,0x22,0x22,0x22,0x3E,0x22,0x22,0x3E,0x08,0x08,0x7F,0x00,0x00,0x00,0x00 } },
};

// Font ranges
static FontRange font_ranges[] = {
    { NULL, 96, ASCII_START, ASCII_END },           // ASCII (handled by font8x16.c)
    { hiragana_glyphs, sizeof(hiragana_glyphs)/sizeof(FontGlyph), HIRAGANA_START, HIRAGANA_END },
    { katakana_glyphs, sizeof(katakana_glyphs)/sizeof(FontGlyph), KATAKANA_START, KATAKANA_END },
    { kanji_glyphs, sizeof(kanji_glyphs)/sizeof(FontGlyph), KANJI_START, KANJI_END },
};

static const uint8_t missing_char_bitmap[FONT_BYTES_PER_CHAR] = {
    0x00,0x00,0x7E,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7E,0x00,0x00,0x00,0x00
};

int unicode_font_init(void) {
    // Initialize font system (could load additional fonts from files here)
    return 0;
}

void unicode_font_cleanup(void) {
    // Cleanup font resources if needed
}

const uint8_t* get_glyph_bitmap(uint32_t codepoint) {
    // Handle ASCII characters using existing font8x16
    if (codepoint >= ASCII_START && codepoint <= ASCII_END) {
        return font8x16[codepoint - ASCII_START];
    }
    
    // Search through other font ranges
    for (int i = 1; i < sizeof(font_ranges)/sizeof(FontRange); i++) {
        FontRange *range = &font_ranges[i];
        if (codepoint >= range->start_codepoint && codepoint <= range->end_codepoint) {
            // Linear search through glyphs in this range
            for (uint32_t j = 0; j < range->count; j++) {
                if (range->glyphs[j].codepoint == codepoint) {
                    return range->glyphs[j].bitmap;
                }
            }
        }
    }
    
    // Return missing character bitmap if not found
    return missing_char_bitmap;
}

int is_fullwidth_char(uint32_t codepoint) {
    // Japanese characters are typically full-width (16x16 pixels)
    // For now, we'll treat them as regular width but this could be extended
    return (codepoint >= HIRAGANA_START && codepoint <= HIRAGANA_END) ||
           (codepoint >= KATAKANA_START && codepoint <= KATAKANA_END) ||
           (codepoint >= KANJI_START && codepoint <= KANJI_END);
}